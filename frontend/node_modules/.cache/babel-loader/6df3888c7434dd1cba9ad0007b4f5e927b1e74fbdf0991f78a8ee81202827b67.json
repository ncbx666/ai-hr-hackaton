{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\79046\\\\Desktop\\\\ai-hr-hackaton\\\\ai-hr-hackaton\\\\frontend\\\\src\\\\pages\\\\candidate\\\\Interview.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './Interview.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Interview = () => {\n  _s();\n  const {\n    sessionId\n  } = useParams();\n  const [ws, setWs] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [isRecording, setIsRecording] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [currentTranscript, setCurrentTranscript] = useState('');\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ –æ—Ç–≤–µ—Ç–∞\n  const playAudioResponse = audioBase64 => {\n    try {\n      // –î–µ–∫–æ–¥–∏—Ä—É–µ–º base64 –≤ blob\n      const audioData = atob(audioBase64);\n      const arrayBuffer = new ArrayBuffer(audioData.length);\n      const uint8Array = new Uint8Array(arrayBuffer);\n      for (let i = 0; i < audioData.length; i++) {\n        uint8Array[i] = audioData.charCodeAt(i);\n      }\n      const blob = new Blob([uint8Array], {\n        type: 'audio/mp3'\n      });\n      const audioUrl = URL.createObjectURL(blob);\n      const audio = new Audio(audioUrl);\n      audio.play().catch(e => console.error('Audio play error:', e));\n\n      // –û—á–∏—â–∞–µ–º URL –ø–æ—Å–ª–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è\n      audio.onended = () => {\n        URL.revokeObjectURL(audioUrl);\n      };\n    } catch (error) {\n      console.error('Audio decoding error:', error);\n    }\n  };\n\n  // WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ\n  useEffect(() => {\n    if (!sessionId) return;\n    const websocket = new WebSocket(`ws://localhost:8000/ws/interview/${sessionId}`);\n    websocket.onopen = () => {\n      console.log('[WebSocket] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\n      setIsConnected(true);\n    };\n    websocket.onmessage = event => {\n      const message = JSON.parse(event.data);\n      console.log('[WebSocket] –ü–æ–ª—É—á–µ–Ω–æ:', message);\n      switch (message.type) {\n        case 'welcome':\n          setMessages(prev => [...prev, message]);\n          break;\n        case 'transcript':\n          if (message.is_final) {\n            setCurrentTranscript('');\n            setMessages(prev => [...prev, message]);\n          } else {\n            setCurrentTranscript(message.text || '');\n          }\n          break;\n        case 'question':\n          setMessages(prev => [...prev, message]);\n          break;\n        case 'audio_response':\n          // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∞—É–¥–∏–æ –æ—Ç–≤–µ—Ç\n          if (message.audio_data) {\n            playAudioResponse(message.audio_data);\n          }\n          break;\n        case 'interview_ended':\n          setMessages(prev => [...prev, message]);\n          setIsRecording(false);\n          break;\n        default:\n          setMessages(prev => [...prev, message]);\n      }\n    };\n    websocket.onclose = () => {\n      console.log('[WebSocket] –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');\n      setIsConnected(false);\n    };\n    websocket.onerror = error => {\n      console.error('[WebSocket] –û—à–∏–±–∫–∞:', error);\n    };\n    setWs(websocket);\n    return () => {\n      websocket.close();\n    };\n  }, [sessionId]);\n\n  // –ó–∞–ø—É—Å–∫ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const mediaRecorder = new MediaRecorder(stream);\n      mediaRecorder.ondataavailable = event => {\n        if (event.data.size > 0) {\n          audioChunksRef.current.push(event.data);\n\n          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞—É–¥–∏–æ —á–∞–Ω–∫ —á–µ—Ä–µ–∑ WebSocket (–∑–∞–≥–ª—É—à–∫–∞)\n          if (ws && ws.readyState === WebSocket.OPEN) {\n            ws.send(JSON.stringify({\n              type: 'audio_chunk',\n              data: `audio_chunk_${audioChunksRef.current.length}`\n            }));\n          }\n        }\n      };\n      mediaRecorder.onstop = () => {\n        // –°–∏–º—É–ª–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç\n        const finalText = `–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç ${Date.now()}`;\n        if (ws && ws.readyState === WebSocket.OPEN) {\n          ws.send(JSON.stringify({\n            type: 'final_transcript',\n            text: finalText\n          }));\n        }\n\n        // –û—á–∏—â–∞–µ–º –∞—É–¥–∏–æ —á–∞–Ω–∫–∏\n        audioChunksRef.current = [];\n\n        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Ç—Ä–µ–∫–∏\n        stream.getTracks().forEach(track => track.stop());\n      };\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.start(100); // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —á–∞–Ω–∫–∏ –∫–∞–∂–¥—ã–µ 100–º—Å\n      setIsRecording(true);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É:', error);\n      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É');\n    }\n  };\n\n  // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n\n  // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é\n  const endInterview = () => {\n    if (ws && ws.readyState === WebSocket.OPEN) {\n      ws.send(JSON.stringify({\n        type: 'end_interview'\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"interview-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"interview-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0432\\u044C\\u044E - \\u0421\\u0435\\u0441\\u0441\\u0438\\u044F \", sessionId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connection-status\",\n        children: [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441: \", isConnected ? 'üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : 'üî¥ –û—Ç–∫–ª—é—á–µ–Ω–æ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"interview-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-list\",\n          children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message message-${msg.type}`,\n            children: [msg.type === 'welcome' && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0421\\u0438\\u0441\\u0442\\u0435\\u043C\\u0430:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 22\n              }, this), \" \", msg.message]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 19\n            }, this), msg.type === 'transcript' && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0412\\u0430\\u0448 \\u043E\\u0442\\u0432\\u0435\\u0442:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 22\n              }, this), \" \", msg.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, this), msg.type === 'question' && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 \", msg.question_number, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 22\n              }, this), \" \", msg.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 19\n            }, this), msg.type === 'interview_ended' && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u0421\\u0438\\u0441\\u0442\\u0435\\u043C\\u0430:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 22\n              }, this), \" \", msg.message]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), currentTranscript && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"current-transcript\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0421\\u0435\\u0439\\u0447\\u0430\\u0441 \\u0433\\u043E\\u0432\\u043E\\u0440\\u0438\\u0442\\u0435:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 18\n            }, this), \" \", currentTranscript]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"recording-controls\",\n          children: !isRecording ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: startRecording,\n            disabled: !isConnected,\n            className: \"record-button\",\n            children: \"\\uD83C\\uDFA4 \\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopRecording,\n            className: \"stop-button\",\n            children: \"\\u23F9\\uFE0F \\u041E\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u043F\\u0438\\u0441\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"interview-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: endInterview,\n            disabled: !isConnected,\n            className: \"end-button\",\n            children: \"\\u274C \\u0417\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u0438\\u043D\\u0442\\u0435\\u0440\\u0432\\u044C\\u044E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n_s(Interview, \"3xHV6h2vDd5gLomiSckNDN0Tpjo=\", false, function () {\n  return [useParams];\n});\n_c = Interview;\nexport default Interview;\nvar _c;\n$RefreshReg$(_c, \"Interview\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","jsxDEV","_jsxDEV","Interview","_s","sessionId","ws","setWs","isConnected","setIsConnected","isRecording","setIsRecording","messages","setMessages","currentTranscript","setCurrentTranscript","mediaRecorderRef","audioChunksRef","playAudioResponse","audioBase64","audioData","atob","arrayBuffer","ArrayBuffer","length","uint8Array","Uint8Array","i","charCodeAt","blob","Blob","type","audioUrl","URL","createObjectURL","audio","Audio","play","catch","e","console","error","onended","revokeObjectURL","websocket","WebSocket","onopen","log","onmessage","event","message","JSON","parse","data","prev","is_final","text","audio_data","onclose","onerror","close","startRecording","stream","navigator","mediaDevices","getUserMedia","mediaRecorder","MediaRecorder","ondataavailable","size","current","push","readyState","OPEN","send","stringify","onstop","finalText","Date","now","getTracks","forEach","track","stop","start","alert","stopRecording","state","endInterview","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","question_number","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/79046/Desktop/ai-hr-hackaton/ai-hr-hackaton/frontend/src/pages/candidate/Interview.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport './Interview.css';\r\n\r\ninterface Message {\r\n  type: 'welcome' | 'transcript' | 'question' | 'interview_ended' | 'audio_response';\r\n  text?: string;\r\n  message?: string;\r\n  is_final?: boolean;\r\n  question_number?: number;\r\n  audio_data?: string;\r\n}\r\n\r\nconst Interview: React.FC = () => {\r\n  const { sessionId } = useParams<{ sessionId: string }>();\r\n  const [ws, setWs] = useState<WebSocket | null>(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [currentTranscript, setCurrentTranscript] = useState('');\r\n  \r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n  const audioChunksRef = useRef<Blob[]>([]);\r\n\r\n  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ –æ—Ç–≤–µ—Ç–∞\r\n  const playAudioResponse = (audioBase64: string) => {\r\n    try {\r\n      // –î–µ–∫–æ–¥–∏—Ä—É–µ–º base64 –≤ blob\r\n      const audioData = atob(audioBase64);\r\n      const arrayBuffer = new ArrayBuffer(audioData.length);\r\n      const uint8Array = new Uint8Array(arrayBuffer);\r\n      \r\n      for (let i = 0; i < audioData.length; i++) {\r\n        uint8Array[i] = audioData.charCodeAt(i);\r\n      }\r\n      \r\n      const blob = new Blob([uint8Array], { type: 'audio/mp3' });\r\n      const audioUrl = URL.createObjectURL(blob);\r\n      \r\n      const audio = new Audio(audioUrl);\r\n      audio.play().catch(e => console.error('Audio play error:', e));\r\n      \r\n      // –û—á–∏—â–∞–µ–º URL –ø–æ—Å–ª–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è\r\n      audio.onended = () => {\r\n        URL.revokeObjectURL(audioUrl);\r\n      };\r\n    } catch (error) {\r\n      console.error('Audio decoding error:', error);\r\n    }\r\n  };\r\n\r\n  // WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ\r\n  useEffect(() => {\r\n    if (!sessionId) return;\r\n\r\n    const websocket = new WebSocket(`ws://localhost:8000/ws/interview/${sessionId}`);\r\n    \r\n    websocket.onopen = () => {\r\n      console.log('[WebSocket] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ');\r\n      setIsConnected(true);\r\n    };\r\n\r\n    websocket.onmessage = (event) => {\r\n      const message: Message = JSON.parse(event.data);\r\n      console.log('[WebSocket] –ü–æ–ª—É—á–µ–Ω–æ:', message);\r\n      \r\n      switch (message.type) {\r\n        case 'welcome':\r\n          setMessages(prev => [...prev, message]);\r\n          break;\r\n          \r\n        case 'transcript':\r\n          if (message.is_final) {\r\n            setCurrentTranscript('');\r\n            setMessages(prev => [...prev, message]);\r\n          } else {\r\n            setCurrentTranscript(message.text || '');\r\n          }\r\n          break;\r\n          \r\n        case 'question':\r\n          setMessages(prev => [...prev, message]);\r\n          break;\r\n          \r\n        case 'audio_response':\r\n          // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∞—É–¥–∏–æ –æ—Ç–≤–µ—Ç\r\n          if (message.audio_data) {\r\n            playAudioResponse(message.audio_data);\r\n          }\r\n          break;\r\n          \r\n        case 'interview_ended':\r\n          setMessages(prev => [...prev, message]);\r\n          setIsRecording(false);\r\n          break;\r\n          \r\n        default:\r\n          setMessages(prev => [...prev, message]);\r\n      }\r\n    };\r\n\r\n    websocket.onclose = () => {\r\n      console.log('[WebSocket] –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');\r\n      setIsConnected(false);\r\n    };\r\n\r\n    websocket.onerror = (error) => {\r\n      console.error('[WebSocket] –û—à–∏–±–∫–∞:', error);\r\n    };\r\n\r\n    setWs(websocket);\r\n\r\n    return () => {\r\n      websocket.close();\r\n    };\r\n  }, [sessionId]);\r\n\r\n  // –ó–∞–ø—É—Å–∫ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const mediaRecorder = new MediaRecorder(stream);\r\n      \r\n      mediaRecorder.ondataavailable = (event) => {\r\n        if (event.data.size > 0) {\r\n          audioChunksRef.current.push(event.data);\r\n          \r\n          // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞—É–¥–∏–æ —á–∞–Ω–∫ —á–µ—Ä–µ–∑ WebSocket (–∑–∞–≥–ª—É—à–∫–∞)\r\n          if (ws && ws.readyState === WebSocket.OPEN) {\r\n            ws.send(JSON.stringify({\r\n              type: 'audio_chunk',\r\n              data: `audio_chunk_${audioChunksRef.current.length}`\r\n            }));\r\n          }\r\n        }\r\n      };\r\n\r\n      mediaRecorder.onstop = () => {\r\n        // –°–∏–º—É–ª–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç\r\n        const finalText = `–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç ${Date.now()}`;\r\n        if (ws && ws.readyState === WebSocket.OPEN) {\r\n          ws.send(JSON.stringify({\r\n            type: 'final_transcript',\r\n            text: finalText\r\n          }));\r\n        }\r\n        \r\n        // –û—á–∏—â–∞–µ–º –∞—É–¥–∏–æ —á–∞–Ω–∫–∏\r\n        audioChunksRef.current = [];\r\n        \r\n        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Ç—Ä–µ–∫–∏\r\n        stream.getTracks().forEach(track => track.stop());\r\n      };\r\n\r\n      mediaRecorderRef.current = mediaRecorder;\r\n      mediaRecorder.start(100); // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º —á–∞–Ω–∫–∏ –∫–∞–∂–¥—ã–µ 100–º—Å\r\n      setIsRecording(true);\r\n      \r\n    } catch (error) {\r\n      console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É:', error);\r\n      alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É');\r\n    }\r\n  };\r\n\r\n  // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\r\n      mediaRecorderRef.current.stop();\r\n      setIsRecording(false);\r\n    }\r\n  };\r\n\r\n  // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤—å—é\r\n  const endInterview = () => {\r\n    if (ws && ws.readyState === WebSocket.OPEN) {\r\n      ws.send(JSON.stringify({ type: 'end_interview' }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"interview-container\">\r\n      <div className=\"interview-header\">\r\n        <h1>–ò–Ω—Ç–µ—Ä–≤—å—é - –°–µ—Å—Å–∏—è {sessionId}</h1>\r\n        <div className=\"connection-status\">\r\n          –°—Ç–∞—Ç—É—Å: {isConnected ? 'üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : 'üî¥ –û—Ç–∫–ª—é—á–µ–Ω–æ'}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"interview-content\">\r\n        <div className=\"messages-section\">\r\n          <h3>–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π:</h3>\r\n          <div className=\"messages-list\">\r\n            {messages.map((msg, index) => (\r\n              <div key={index} className={`message message-${msg.type}`}>\r\n                {msg.type === 'welcome' && (\r\n                  <p><strong>–°–∏—Å—Ç–µ–º–∞:</strong> {msg.message}</p>\r\n                )}\r\n                {msg.type === 'transcript' && (\r\n                  <p><strong>–í–∞—à –æ—Ç–≤–µ—Ç:</strong> {msg.text}</p>\r\n                )}\r\n                {msg.type === 'question' && (\r\n                  <p><strong>–í–æ–ø—Ä–æ—Å {msg.question_number}:</strong> {msg.text}</p>\r\n                )}\r\n                {msg.type === 'interview_ended' && (\r\n                  <p><strong>–°–∏—Å—Ç–µ–º–∞:</strong> {msg.message}</p>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          {currentTranscript && (\r\n            <div className=\"current-transcript\">\r\n              <p><strong>–°–µ–π—á–∞—Å –≥–æ–≤–æ—Ä–∏—Ç–µ:</strong> {currentTranscript}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"controls-section\">\r\n          <div className=\"recording-controls\">\r\n            {!isRecording ? (\r\n              <button \r\n                onClick={startRecording} \r\n                disabled={!isConnected}\r\n                className=\"record-button\"\r\n              >\r\n                üé§ –ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å\r\n              </button>\r\n            ) : (\r\n              <button \r\n                onClick={stopRecording}\r\n                className=\"stop-button\"\r\n              >\r\n                ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"interview-controls\">\r\n            <button \r\n              onClick={endInterview}\r\n              disabled={!isConnected}\r\n              className=\"end-button\"\r\n            >\r\n              ‚ùå –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤—å—é\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Interview;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}